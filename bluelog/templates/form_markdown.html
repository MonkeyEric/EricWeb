{% extends "base.html" %}
{% block title %}Markdown编辑{% endblock %}
{% block head %}
<link rel="stylesheet" href="{{url_for('static',filename='editormd/css/editormd.css')}}">
{% endblock %}

<body>
{% block wrapper%}
<div id="page-wrapper" class="gray-bg">
{{ self.pheader() }}
    <div class="row wrapper border-bottom white-bg page-heading">
        <div class="col-lg-10">
            <h2>Markdown</h2>
            <ol class="breadcrumb">
                <li class="breadcrumb-item">
                    <a href="{{url_for('admin.index')}}">主页</a>
                </li>
                <li class="breadcrumb-item">
                    <a>表单</a>
                </li>
                <li class="breadcrumb-item active">
                    <a href="{{url_for('blog.code_editor')}}"> <strong>Markdown</strong></a>
                </li>
            </ol>
        </div>

    </div>
    <div class="wrapper wrapper-content">

        <div class="row">
            <div class="col-lg-12">
                <div class="ibox ">
                    <div class="ibox-title">
                        <h5>Bootstrap markdown <small>http://www.codingdrama.com/bootstrap-markdown/</small></h5>
                        <div class="ibox-tools">
                            <a class="collapse-link">
                                <i class="fa fa-chevron-up"></i>
                            </a>
                        </div>
                    </div>
                    <div class="ibox-content" id="test-editor">

<!--                           <form method="post" action="#">-->
                                <textarea style="display:none;" placeholder="请输入内容">[TOC]

#### Disabled options

- TeX (Based on KaTeX);
- Emoji;
- Task lists;
- HTML tags decode;
- Flowchart and Sequence Diagram;

#### Editor.md directory

    editor.md/
            lib/
            css/
            scss/
            tests/
            fonts/
            images/
            plugins/
            examples/
            languages/
            editormd.js
            ...

```html
<!-- English -->
<script src="../dist/js/languages/en.js"></script>

<!-- 繁體中文 -->
<script src="../dist/js/languages/zh-tw.js"></script>
```

                                </textarea>
<!--                                <input type="submit" name="submit" value="提交表单 Submit" style="padding: 5px;">-->

<!--                           </form>-->

                    </div>
                </div>
            </div>
        </div>
    </div>
{{ self.footer() }}
</div>
{% endblock %}
{%block script%}
    <!-- Bootstrap markdown -->
<script src="{{url_for('static',filename='editormd/editormd.min.js')}}"></script>

<script type="text/javascript">
    $(function() {
        var testEditor = editormd("test-editor", {
            // width  : "100%",
            // height : "100%",
            path   : '/static/editormd/lib/',
            flowChart: true,
            placeholder : "此处开始编写您要发布的内容...",
            emoji: true,
            taskList: true,
            sequenceDiagram: true,       // 开启时序/序列图支持，默认关闭,
            delay: 0,
            saveHTMLToTextarea : true, // 保存 HTML 到 Textarea
            toolbarAutoFixed:false,//工具栏自动固定定位的开启与禁用
            syncScrolling: "single",
            watch: true,

            // 工具栏添加一个自定义方法
            toolbarIcons: function() {
                // 给工具栏full模式添加一个自定义方法
                return editormd.toolbarModes.full.concat(["customIcon"]);
            },

            // 自定义方法的图标 指定一个FontAawsome的图标类
            toolbarIconsClass: {
                customIcon: "fa-paste"
            },
            // 没有图标可以插入内容，字符串或HTML标签
            toolbarIconTexts: {
                customIcon: "从草稿箱加载"
            },
            // 图标的title
            lang: {
                toolbar: {
                    customIcon: "从草稿箱加载"
                }
            },
            // 自定义工具栏按钮的事件处理
            toolbarHandlers: {
                customIcon: function(){
                    // 读取缓存内容
                    testEditor.CodeAutoSaveGetCache();
                }
            },
            // 自定义工具栏按钮的事件处理
            onload: function() {
                // 引入插件 执行监听方法
                editormd.loadPlugin("../static/code-auto-save/code-auto-save", function() {
                    // 初始化插件 实现监听
                    testEditor.CodeAutoSave();
                });
            }
        });
        /********以下方法需要在插件初始化完成后方可调用********/
            // // 删除缓存
            // testEditor.CodeAutoSaveDelCache();
            // // 清空缓存的文档内容
            // testEditor.CodeAutoSaveEmptyCacheContent();
            // // 自定义设置缓存
            // testEditor.CodeAutoSaveSetCache('缓存内容');
    });
</script>

{% endblock %}