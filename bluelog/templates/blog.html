{% import "_macros.html" as macros %}
{% extends "base.html" %}
{% block title%}博客{% endblock %}
{% block head %}
{{ super() }}
{{ moment.include_moment() }}
{% endblock %}
{% block wrapper%}
<div id="page-wrapper" class="gray-bg">
    {{ self.pheader() }}
    <div class="row wrapper border-bottom white-bg page-heading">
        <div class="col-lg-10">
            <h2>博客</h2>
            <ol class="breadcrumb">
                <li class="breadcrumb-item">
                    <a href="{{url_for('admin.index')}}">主页</a>
                </li>
                <li class="breadcrumb-item">
                    <a>应用</a>
                </li>
                <li class="breadcrumb-item active">
                    <strong>博客</strong>
                </li>
            </ol>
        </div>
    </div>
    <div class="wrapper wrapper-content  animated fadeInRight blog">
        <div class="row">
            <div class="col-md-8">
                {% if posts %}
                {% for post in posts %}
                <div class="ibox">
                    <div class="ibox-content">
                        <a href="{{ url_for('blog.show_post', post_id=post.id)}}" class="btn-link">
                            <h2>
                                {{ post.title }}
                            </h2>
                        </a>
                        <div class="small m-b-xs">
                            <strong>火星一号</strong> <span class="text-muted"><i class="fa fa-clock-o"></i>&nbsp;&nbsp;{{ moment(post.timestamp).format('LLL')}}</span>
                        </div>
                        <p>
                            {{post.body|striptags|truncate}}
                             <small><a  href="{{ url_for('.show_post', post_id=post.id) }}">更多</a></small>
                        </p>
                        <div class="row">
                            <div class="col-md-6">
                                    <h5>标签:</h5>


                                    <button class="btn btn-white btn-xs" type="button"><a href="{{ url_for('.show_category', category_id=post.category.id) }}">{{ post.category.name }}</a></button>
<!--                                    <button class="btn btn-white btn-xs" type="button">标签</button>-->
                            </div>
                            <div class="col-md-6">
                                <div class="small text-right">
                                    <h5>统计:</h5>
                                    <div>
                                        <i class="fa fa-comments-o"> </i>
                                        <a href="{{ url_for('.show_post', post_id=post.id) }}#comments">{{ post.comments|length}} 评论 </a>
                                    </div>
                                    <i class="fa fa-eye"> </i> 144 浏览
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
                {% else %}
                <div class="tooltip">
                    <h5>没有文章</h5>
                    {% if current_user.is_authenticated %}
                        <a href="{{ url_for('blog.code_editor') }}">现在就去写博客</a>
                    {% endif %}
                </div>
                {% endif %}
            {% if pagination %}
                <div class="pagination">
                    {{ macros.pagination_widget(pagination, 'blog.blog_get') }}
                </div>
            {% endif %}

            </div>
           {% include '_blog_sidebar.html' %}
        </div>
    </div>
    {{ self.footer() }}
</div>
{% endblock %}